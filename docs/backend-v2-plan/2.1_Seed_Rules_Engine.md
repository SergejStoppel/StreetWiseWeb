### **Phase 2: The Modular Analysis Engine**

#### **Issue #2.1: Implement Comprehensive Rules Engine with Enhanced Educational Content**

- **Problem:** The analysis workers need a comprehensive, competitor-level set of rules with educational content, multiple solution approaches, and enhanced data structures to match or exceed market-leading accessibility tools.
- **Goal/Benefit:** To create a rich, extensible, and centrally-managed knowledge base that provides 100+ checks with educational content, WCAG mapping, disability impact identification, and actionable guidance comparable to leading competitors.
- **Acceptance Requirements:**
    - [ ] Enhanced database schema supports educational content, solution templates, and testing instructions.
    - [ ] Comprehensive seed script populates 100+ rules across accessibility, SEO, and performance categories.
    - [ ] Each rule includes WCAG criteria mapping, disability groups affected, and business impact scoring.
    - [ ] Solution templates provide DIY and third-party remediation approaches with code examples.
    - [ ] Testing instructions include both automated and manual verification steps.
    - [ ] Rules are organized into sub-modules for better maintainability (see sub-tickets 2.1a, 2.1b, 2.1c).
    - [ ] Integration with enhanced issue reporting structure for competitive feature parity.
- **Implementation Details:**
    - This ticket is divided into three sub-tickets for better organization:
      - **2.1a**: Enhanced Accessibility Rules (60+ rules)
      - **2.1b**: Enhanced SEO Rules (25+ rules)  
      - **2.1c**: Enhanced Performance Rules (20+ rules)
    - Enhanced database schema (see sub-tickets for details)
    - Seed script must be idempotent and support incremental updates

---
#### **Enhanced Database Schema Requirements**

The enhanced rules engine requires additional database schema to support competitive features:

```sql
-- Enhanced rules table with educational content
ALTER TABLE rules ADD COLUMN wcag_criteria TEXT[];
ALTER TABLE rules ADD COLUMN wcag_level TEXT; -- 'A', 'AA', 'AAA'
ALTER TABLE rules ADD COLUMN disability_groups TEXT[];
ALTER TABLE rules ADD COLUMN impact_score INTEGER; -- 1-10 business impact
ALTER TABLE rules ADD COLUMN legal_risk_level TEXT; -- 'low', 'medium', 'high', 'critical'
ALTER TABLE rules ADD COLUMN plain_language_explanation TEXT;
ALTER TABLE rules ADD COLUMN why_it_matters TEXT;
ALTER TABLE rules ADD COLUMN business_impact TEXT;

-- Solution templates for each rule
CREATE TABLE rule_solutions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  rule_id UUID NOT NULL REFERENCES rules(id),
  solution_type TEXT NOT NULL, -- 'diy', 'third_party', 'alternative'
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  steps JSONB, -- Array of step instructions
  code_examples JSONB, -- { incorrect: "...", correct: "..." }
  tools_mentioned TEXT[], -- ['accessiBe', 'UserWay', 'axe']
  estimated_effort TEXT, -- 'low', 'medium', 'high'
  technical_level TEXT -- 'beginner', 'intermediate', 'advanced'
);

-- Testing instructions for validation
CREATE TABLE rule_testing (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  rule_id UUID NOT NULL REFERENCES rules(id),
  automated_tests JSONB, -- Tools and commands to run
  manual_tests JSONB, -- Step-by-step manual verification
  validation_criteria TEXT -- What constitutes a pass/fail
);
```

---
#### **Comprehensive Rules Implementation**

**For detailed rule specifications, see the following sub-tickets:**

- **[2.1a_Enhanced_Accessibility_Rules.md](./2.1a_Enhanced_Accessibility_Rules.md)** - 60+ accessibility rules with WCAG mapping
- **[2.1b_Enhanced_SEO_Rules.md](./2.1b_Enhanced_SEO_Rules.md)** - 25+ SEO rules for technical and content optimization  
- **[2.1c_Enhanced_Performance_Rules.md](./2.1c_Enhanced_Performance_Rules.md)** - 20+ performance rules including Core Web Vitals

Each sub-ticket includes:
- Complete rule definitions with enhanced data structure
- Educational content and plain-language explanations
- Multiple solution approaches (DIY + third-party)
- Testing and validation instructions
- WCAG/industry standard mappings