### **Phase 2: The Modular Analysis Engine**

#### **Issue #2.1a: Enhanced Accessibility Rules (60+ Rules with Educational Content)**

- **Problem:** Current accessibility rules are basic and lack the comprehensive coverage, educational content, and solution guidance that competitors provide.
- **Goal/Benefit:** To implement 60+ comprehensive accessibility rules that match or exceed competitor capabilities, with WCAG mapping, disability impact identification, and actionable guidance.
- **Acceptance Requirements:**
    - [ ] 60+ accessibility rules are implemented across all major WCAG categories.
    - [ ] Each rule includes WCAG success criteria mapping and conformance level.
    - [ ] Disability groups affected are identified for each rule.
    - [ ] Plain-language explanations describe what each rule means to end users.
    - [ ] Multiple solution approaches (DIY + third-party) are provided for each rule.
    - [ ] Code examples show both incorrect and correct implementations.
    - [ ] Testing instructions include automated and manual verification steps.
    - [ ] Legal risk levels are assigned based on ADA/Section 508 compliance impact.

---

## **Comprehensive Accessibility Rules List**

### **Images & Media (8 rules)**

| rule_key | name | WCAG | Level | Disability Groups | Legal Risk |
|----------|------|------|-------|------------------|------------|
| `ACC_IMG_01_ALT_TEXT_MISSING` | Image Missing Alt Text | 1.1.1 | A | Blind, Deafblind | Critical |
| `ACC_IMG_02_ALT_TEXT_DECORATIVE` | Decorative Image Alt Text | 1.1.1 | A | Blind, Deafblind | High |
| `ACC_IMG_03_ALT_TEXT_INFORMATIVE` | Uninformative Alt Text | 1.1.1 | A | Blind, Deafblind | High |
| `ACC_IMG_04_COMPLEX_IMAGE_DESC` | Complex Image Missing Description | 1.1.1 | A | Blind, Deafblind | High |
| `ACC_IMG_05_IMAGE_TEXT_REDUNDANT` | Image Alt Text Duplicates Adjacent Text | 1.1.1 | A | Blind, Deafblind | Medium |
| `ACC_MED_01_VIDEO_CAPTIONS` | Video Missing Captions | 1.2.2 | A | Deaf, Hard of Hearing | Critical |
| `ACC_MED_02_AUDIO_TRANSCRIPT` | Audio Missing Transcript | 1.2.1 | A | Deaf, Hard of Hearing | Critical |
| `ACC_MED_03_VIDEO_AUDIO_DESC` | Video Missing Audio Description | 1.2.3 | AA | Blind | Medium |

### **Content Structure & Navigation (12 rules)**

| rule_key | name | WCAG | Level | Disability Groups | Legal Risk |
|----------|------|------|-------|------------------|------------|
| `ACC_STR_01_HEADING_ORDER` | Improper Heading Order | 1.3.1, 2.4.6 | AA | Blind, Cognitive, Motor | High |
| `ACC_STR_02_NO_H1` | Page Missing H1 Heading | 2.4.6 | AA | Blind, Cognitive | High |
| `ACC_STR_03_MULTIPLE_H1` | Multiple H1 Headings | 2.4.6 | AA | Blind, Cognitive | Medium |
| `ACC_STR_04_PAGE_LANG_MISSING` | Page Language Not Defined | 3.1.1 | A | Blind, Cognitive | Critical |
| `ACC_STR_05_ELEMENT_LANG_MISSING` | Element Language Not Defined | 3.1.2 | AA | Blind, Cognitive | Medium |
| `ACC_STR_06_PAGE_TITLE_MISSING` | Page Title Missing | 2.4.2 | A | Blind, Cognitive | Critical |
| `ACC_STR_07_PAGE_TITLE_UNINFORMATIVE` | Page Title Uninformative | 2.4.2 | A | Blind, Cognitive | High |
| `ACC_STR_08_SKIP_LINK_MISSING` | Skip Navigation Link Missing | 2.4.1 | A | Blind, Motor | High |
| `ACC_STR_09_SKIP_LINK_BROKEN` | Skip Navigation Link Broken | 2.4.1 | A | Blind, Motor | High |
| `ACC_STR_10_LANDMARK_MISSING` | Page Landmarks Missing | 1.3.1 | A | Blind | Medium |
| `ACC_STR_11_LANDMARK_DUPLICATE` | Duplicate Landmark Labels | 2.4.6 | AA | Blind | Medium |
| `ACC_STR_12_LIST_STRUCTURE_INVALID` | Invalid List Structure | 1.3.1 | A | Blind, Cognitive | Medium |

### **Forms & Input Controls (15 rules)**

| rule_key | name | WCAG | Level | Disability Groups | Legal Risk |
|----------|------|------|-------|------------------|------------|
| `ACC_FRM_01_LABEL_MISSING` | Form Input Missing Label | 3.3.2 | A | Blind, Cognitive | Critical |
| `ACC_FRM_02_LABEL_FOR_ID_MISMATCH` | Label-Input ID Mismatch | 1.3.1 | A | Blind, Cognitive | High |
| `ACC_FRM_03_LABEL_HIDDEN` | Form Label Hidden | 3.3.2 | A | Blind, Cognitive | High |
| `ACC_FRM_04_FIELDSET_LEGEND_MISSING` | Fieldset Missing Legend | 1.3.1 | A | Blind, Cognitive | High |
| `ACC_FRM_05_REQUIRED_INDICATION` | Required Field Not Indicated | 3.3.2 | A | Blind, Cognitive | High |
| `ACC_FRM_06_ERROR_IDENTIFICATION` | Form Errors Not Identified | 3.3.1 | A | Blind, Cognitive | Critical |
| `ACC_FRM_07_ERROR_SUGGESTION` | Form Errors Missing Suggestions | 3.3.3 | AA | Blind, Cognitive | High |
| `ACC_FRM_08_INPUT_PURPOSE` | Input Purpose Not Identified | 1.3.5 | AA | Cognitive, Motor | Medium |
| `ACC_FRM_09_PLACEHOLDER_LABEL` | Placeholder Used as Label | 3.3.2 | A | Blind, Cognitive | High |
| `ACC_FRM_10_BUTTON_NAME_MISSING` | Button Missing Accessible Name | 4.1.2 | A | Blind | Critical |
| `ACC_FRM_11_SUBMIT_BUTTON_GENERIC` | Generic Submit Button Text | 2.4.6 | AA | Blind, Cognitive | Medium |
| `ACC_FRM_12_FORM_INSTRUCTION_MISSING` | Form Instructions Missing | 3.3.2 | A | Cognitive | Medium |
| `ACC_FRM_13_AUTOCOMPLETE_MISSING` | Autocomplete Attribute Missing | 1.3.5 | AA | Cognitive, Motor | Low |
| `ACC_FRM_14_INPUT_FORMAT_UNCLEAR` | Input Format Not Clear | 3.3.2 | A | Cognitive | Medium |
| `ACC_FRM_15_CHANGE_OF_CONTEXT` | Unexpected Context Change | 3.2.2 | A | Blind, Cognitive | High |

### **ARIA Implementation (10 rules)**

| rule_key | name | WCAG | Level | Disability Groups | Legal Risk |
|----------|------|------|-------|------------------|------------|
| `ACC_ARIA_01_ROLE_INVALID` | Invalid ARIA Role | 4.1.2 | A | Blind | High |
| `ACC_ARIA_02_REQUIRED_ATTR_MISSING` | ARIA Required Attributes Missing | 4.1.2 | A | Blind | High |
| `ACC_ARIA_03_INVALID_ATTR_VALUE` | Invalid ARIA Attribute Value | 4.1.2 | A | Blind | High |
| `ACC_ARIA_04_REDUNDANT_ROLE` | Redundant ARIA Role | 4.1.2 | A | Blind | Low |
| `ACC_ARIA_05_HIDDEN_FOCUSABLE` | ARIA Hidden Element Focusable | 4.1.2 | A | Blind | High |
| `ACC_ARIA_06_LIVE_REGION_MISSING` | Live Region Missing | 4.1.3 | AA | Blind | Medium |
| `ACC_ARIA_07_LABELLEDBY_MISSING` | ARIA Labelledby Target Missing | 1.3.1 | A | Blind | High |
| `ACC_ARIA_08_DESCRIBEDBY_MISSING` | ARIA Describedby Target Missing | 1.3.1 | A | Blind | Medium |
| `ACC_ARIA_09_EXPANDED_MISSING` | ARIA Expanded State Missing | 4.1.2 | A | Blind | Medium |
| `ACC_ARIA_10_CONTROLS_MISSING` | ARIA Controls Attribute Missing | 1.3.1 | A | Blind | Medium |

### **Keyboard Navigation (8 rules)**

| rule_key | name | WCAG | Level | Disability Groups | Legal Risk |
|----------|------|------|-------|------------------|------------|
| `ACC_KBD_01_FOCUS_VISIBLE` | Focus Indicator Not Visible | 2.4.7 | AA | Blind, Motor | Critical |
| `ACC_KBD_02_KEYBOARD_TRAP` | Keyboard Focus Trap | 2.1.2 | A | Blind, Motor | Critical |
| `ACC_KBD_03_TABINDEX_POSITIVE` | Positive Tabindex Values | 2.4.3 | A | Blind, Motor | High |
| `ACC_KBD_04_INTERACTIVE_NOT_FOCUSABLE` | Interactive Element Not Focusable | 2.1.1 | A | Blind, Motor | High |
| `ACC_KBD_05_FOCUS_ORDER_LOGICAL` | Illogical Focus Order | 2.4.3 | A | Blind, Motor | High |
| `ACC_KBD_06_BYPASS_BLOCKS` | No Way to Bypass Blocks | 2.4.1 | A | Blind, Motor | High |
| `ACC_KBD_07_KEYBOARD_SHORTCUTS` | Keyboard Shortcuts Conflict | 2.1.4 | A | Motor | Medium |
| `ACC_KBD_08_ACCESS_KEY_DUPLICATE` | Duplicate Access Keys | 2.1.1 | A | Motor | Medium |

### **Color & Visual Design (7 rules)**

| rule_key | name | WCAG | Level | Disability Groups | Legal Risk |
|----------|------|-------|-------|------------------|------------|
| `ACC_CLR_01_TEXT_CONTRAST_RATIO` | Low Text Contrast Ratio | 1.4.3 | AA | Low Vision, Blind | Critical |
| `ACC_CLR_02_LARGE_TEXT_CONTRAST` | Low Large Text Contrast | 1.4.3 | AA | Low Vision, Blind | High |
| `ACC_CLR_03_NON_TEXT_CONTRAST` | Low Non-Text Contrast | 1.4.11 | AA | Low Vision, Blind | High |
| `ACC_CLR_04_COLOR_ONLY_MEANING` | Color Used as Only Visual Means | 1.4.1 | A | Blind, Color Blind | High |
| `ACC_CLR_05_FOCUS_CONTRAST` | Focus Indicator Low Contrast | 1.4.11 | AA | Low Vision, Blind | High |
| `ACC_CLR_06_TEXT_SPACING` | Text Spacing Not Customizable | 1.4.12 | AA | Low Vision, Cognitive | Medium |
| `ACC_CLR_07_REFLOW_CONTENT` | Content Doesn't Reflow | 1.4.10 | AA | Low Vision | Medium |

### **Tables & Data Presentation (5 rules)**

| rule_key | name | WCAG | Level | Disability Groups | Legal Risk |
|----------|------|------|-------|------------------|------------|
| `ACC_TBL_01_HEADER_MISSING` | Table Headers Missing | 1.3.1 | A | Blind | High |
| `ACC_TBL_02_CAPTION_MISSING` | Table Caption Missing | 1.3.1 | A | Blind, Cognitive | Medium |
| `ACC_TBL_03_SCOPE_MISSING` | Table Scope Attributes Missing | 1.3.1 | A | Blind | High |
| `ACC_TBL_04_COMPLEX_TABLE_HEADERS` | Complex Table Headers Unclear | 1.3.1 | A | Blind | High |
| `ACC_TBL_05_LAYOUT_TABLE_HEADERS` | Layout Table Has Headers | 1.3.1 | A | Blind | Medium |

---

## **Implementation Details**

### **Enhanced Issue Reporting Structure**

```typescript
interface AccessibilityIssue {
  // Base fields
  id: string;
  rule_id: string;
  severity: 'critical' | 'serious' | 'moderate' | 'minor';
  
  // Enhanced fields for competitive parity
  wcagCriteria: string[];
  wcagLevel: 'A' | 'AA' | 'AAA';
  disabilityGroups: string[];
  legalRiskLevel: 'low' | 'medium' | 'high' | 'critical';
  impactScore: number; // 1-10
  
  // Element context
  elementContext: {
    selector: string;
    html: string;
    lineNumber?: number;
    attributes: Record<string, string>;
  };
  
  // Visual highlighting
  visualHighlight?: {
    screenshot_id: string;
    coordinates: { x: number; y: number; width: number; height: number };
  };
  
  // Educational content
  educationalContent: {
    plainLanguage: string;
    whyItMatters: string;
    businessImpact: string;
    userStories: string[];
  };
  
  // Solutions and testing
  solutions: RuleSolution[];
  testing: RuleTesting;
}
```

### **Solution Templates Examples**

```json
{
  "rule_id": "ACC_IMG_01_ALT_TEXT_MISSING",
  "solutions": [
    {
      "type": "diy",
      "title": "Add Alt Text to Images",
      "description": "Add descriptive alt attributes to all images",
      "technical_level": "beginner",
      "estimated_effort": "low",
      "steps": [
        "Identify all <img> elements without alt attributes",
        "Write descriptive alt text for each image",
        "Add alt='description' to each image tag"
      ],
      "code_examples": {
        "incorrect": "<img src='logo.png'>",
        "correct": "<img src='logo.png' alt='Company XYZ logo'>"
      }
    },
    {
      "type": "third_party",
      "title": "Automated Alt Text Generation",
      "description": "Use AI-powered tools to generate alt text",
      "tools_mentioned": ["accessiBe", "UserWay", "Microsoft Cognitive Services"],
      "estimated_effort": "low",
      "technical_level": "beginner"
    }
  ]
}
```

This sub-ticket provides comprehensive accessibility rule coverage that matches or exceeds competitor capabilities while maintaining the educational and solution-oriented approach that sets StreetWiseWeb apart.